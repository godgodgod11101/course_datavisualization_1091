load(file = "https://www.dropbox.com/s/8585yr3t0bbcb5b/df_cpiTW.rda?dl=1")
load(file = "https://www.dropbox.com/s/8585yr3t0bbcb5b/df_cpiTW.rda?dl=1")
map(
twcpi$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
library(purrr)
map(
twcpi$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
)
growthCPI <- twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
) ->
df_twcpi
growthCPI <- twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
) ->
df_twcpi
rm(growthCPI, pick_105cpi)
df_twcpi %>%
ggplot()
View(twcpi)
View(df_twcpi)
df_twcpi$年月 %>%
str_extract("[:digit:]+")
df_twcpi$年月 %>%
str_extract("[:digit:]+$")
df_twcpi$年月 %>%
str_replace("M", "-")
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01")
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd() %>% class()
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd() ->
df_twcpi$年月日
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x =
)
)
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd() ->
df_twcpi$年月日
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x =
)
)
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd() ->
df_twcpi$年月日
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x =
)
)
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd() ->
df_twcpi$年月日
View(df_twcpi)
df_twcpi$年月日 <- df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
df_twcpi$年月日 <- df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x = 年月日,
y = 年增率
)
)
View(df_twcpi)
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x = 年月日,
y = as.double(年增率)
)
)
df_twcpi$年增率百分比 <- df_twcpi$年增率 %>%
as.numeric()
View(df_twcpi)
df_twcpi %>%
ggplot() +
geom_line(
mapping = aes(
x = 年月日,
y = 年增率百分比
)
)
View(twcpi)
View(df_twcpi)
df_twcpi$年月日 <-
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
df_twcpi$年增率百分比 <- as.numeric(df_twcpi$年增率)
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(rmd2drake)
library(drake)
# If you use git and does not want to track cache folder, put down the following command:
set_gitignore("class2_1007_cache")
df_twcpi$年月日 <-
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(rmd2drake)
library(drake)
# If you use git and does not want to track cache folder, put down the following command:
set_gitignore("class2_1007_cache")
library(readr)
library(dplyr)
library(ggplot2)
library(svglite)
dataImport = {
xml2::read_xml("https://www.dgbas.gov.tw/public/data/open/Stat/price/PR0101A1M.xml") -> twcpi
xml2::as_list(twcpi) -> twcpi
}
dataProcessing = {
library(purrr)
map(
twcpi$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
) ->
df_twcpi
rm(growthCPI, pick_105cpi)
df_twcpi$年月日 <-
df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd()
df_twcpi$年增率百分比 <- as.numeric(df_twcpi$年增率)
}
baseCanvas = {
df_twcpi %>%
ggplot() ->
baseCanvas
}
View(baseCanvas)
baseCanvas = {
df_twcpi %>%
ggplot()
}
geom1_line = {
baseCanvas +
geom_line(
mapping = aes(
x = 年月日,
y = 年增率百分比
)
)
}
vis_plan_20201007_class2()
mk_plan_20201007_class2()
vis_plan_20201007_class2()
vis_plan_20201007_class2()
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(rmd2drake)
library(drake)
# If you use git and does not want to track cache folder, put down the following command:
set_gitignore("class2_1007_cache")
library(readr)
library(dplyr)
library(ggplot2)
library(svglite)
dataImport = {
xml2::read_xml("https://www.dgbas.gov.tw/public/data/open/Stat/price/PR0101A1M.xml") -> twcpi
xml2::as_list(twcpi)
}
View(dataImport)
dataExtract = {
library(purrr)
map(
dataImport$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- dataImport$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
)
rm(growthCPI, pick_105cpi)
}
dataExtract = {
library(purrr)
map(
dataImport$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- dataImport$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
)
}
View(dataExtract)
rm(growthCPI, pick_105cpi)
dataProcessing = {
dataExtract %>%
mutate(
年月日 = df_twcpi$年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd(),
年增率百分比 = as.numeric(df_twcpi$年增率)
)
}
dataProcessing = {
dataExtract %>%
mutate(
年月日 = 年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd(),
年增率百分比 = as.numeric(年增率)
)
}
View(dataProcessing)
baseCanvas = {
dataProcessing %>%
ggplot()
}
baseCanvas = {
dataProcessing %>%
ggplot()
}
geom1_line = {
baseCanvas +
geom_line(
mapping = aes(
x = 年月日,
y = 年增率百分比
)
)
}
View(pj)
View(pj)
load("~/GitHub/course_datavisualization_1091/.RData")
load("~/GitHub/course_datavisualization_1091/.RData")
View(twcpi)
library(readr)
library(dplyr)
library(ggplot2)
library(svglite)
vis_plan_20201007_class2()
View(plan_20201007_class2)
mk_plan_20201007_class2()
dataImport_twcpi = {
xml2::read_xml("https://www.dgbas.gov.tw/public/data/open/Stat/price/PR0101A1M.xml") %>%
xml2::as_list()
}
dataImport_twcpi = {
xml2::read_xml("https://www.dgbas.gov.tw/public/data/open/Stat/price/PR0101A1M.xml") %>%
xml2::as_list()
}
mk_plan_20201007_class2()
dataImport_twcpi = {
xml2::read_xml("https://www.dgbas.gov.tw/public/data/open/Stat/price/PR0101A1M.xml") %>%
xml2::as_list()
}
View(dataImport_twcpi)
dataExtract = {
library(purrr)
map(
dataImport_twcpi$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- dataImport_twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
)
}
rm(growthCPI, pick_105cpi)
dataProcessing = {
dataExtract %>%
mutate(
年月日 = 年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd(),
年增率百分比 = as.numeric(年增率)
)
}
library(readr)
library(dplyr)
library(stringr)
library(lubridate)
library(ggplot2)
library(svglite)
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(rmd2drake)
library(drake)
# If you use git and does not want to track cache folder, put down the following command:
set_gitignore("class2_1007_cache")
dataProcessing = {
dataExtract %>%
mutate(
年月日 = 年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd(),
年增率百分比 = as.numeric(年增率)
)
}
View(dataProcessing)
baseCanvas = {
dataProcessing %>%
ggplot()
}
baseCanvas = {
dataProcessing %>%
ggplot()
}
baseCanvas
geom1_line = {
baseCanvas +
geom_line(
mapping = aes(
x = 年月日,
y = 年增率百分比
)
)
}
geom1_line
vis_plan_20201007_class2()
mk_plan_20201007_class2()
knitr::opts_chunk$set(echo = TRUE, eval=F)
library(rmd2drake)
library(drake)
# If you use git and does not want to track cache folder, put down the following command:
set_gitignore("class2_1007_cache")
baseCanvas = {
dataProcessing %>%
ggplot()
}
dataProcessing = {
dataExtract %>%
mutate(
年月日 = 年月 %>%
str_replace("M", "-") %>%
paste0("-01") %>%
lubridate::ymd(),
年增率百分比 = as.numeric(年增率)
)
}
rm(growthCPI, pick_105cpi)
dataExtract = {
library(purrr)
map(
dataImport_twcpi$DataSet,
~{
(.x$Item == "總指數(民國105年=100)") &
(.x$TYPE == "年增率(%)")
}
) %>%
unlist() ->    # change list to vector
pick_105cpi
head(pick_105cpi, 20)
growthCPI <- dataImport_twcpi$DataSet[pick_105cpi]
map_dfr(    # return a data frame created by row-binding
seq_along(growthCPI),
~{
data.frame(
項目 = growthCPI[[.x]]$Item[[1]],
年月 = growthCPI[[.x]]$TIME_PERIOD[[1]],
年增率 = growthCPI[[.x]]$Item_VALUE[[1]]
)
}
)
}
vis_plan_20201007_class2()
View(plan_20201007_class2)
View(dataExtract)
View(dataImport_twcpi)
rm(dataExtract)
rm(dataImport_twcpi)
geom1_line
mk_plan_20201007_class2()
mk_plan_20201007_class2()
vis_plan_20201007_class2()
geom1_line
geom1_line + theme_bw()
geom1_line +
theme_classic()
geom1_line +
theme_bw()
font_files()
sysfonts::font.files()
